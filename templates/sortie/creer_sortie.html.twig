{% extends 'base.html.twig' %}

{% block title %}Créer une sortie{% endblock %}

{% block titrePage %}
<div class="ui two column centered grid">
    <div class="column">
        <h1 class="ui centered grid">Créer une sortie</h1>
    </div>
</div>
{% endblock %}


{% block main %}
{#    {{ dump(lieux_asso) }}#}
{#    {{ dump(villes_asso) }}#}

{#    {{ form_start(form) }}#}
{#    {{ form_widget(form) }}#}
{#    <button type="submit">Enregistrer la sortie</button>#}
{#    {{ form_end(form) }}#}

    {{ form_start(form) }}
    <div class="ui two column centered grid">
        <div class="eight column centered row">

            <div class="column">
                <div class="ui form">
                    <div class="field">
                        <div>{{ form_label(form.nom) }}</div><div>{{ form_widget(form.nom) }}</div>
                    </div>
                    <div class="field">
                        <div>{{ form_label(form.date_heure_debut) }}</div><div>{{ form_widget(form.date_heure_debut) }}</div>
                        </div>
                    <div class="field">
                        <div>{{ form_label(form.date_limite_inscription) }}</div><div>{{ form_widget(form.date_limite_inscription) }}</div>
                        </div>
                    <div class="field">
                        <div>{{ form_label(form.nb_inscriptions_max) }}</div><div>{{ form_widget(form.nb_inscriptions_max) }}</div>
                        </div>
                    <div class="field">
                        <div>{{ form_label(form.duree) }}</div><div>{{ form_widget(form.duree) }}</div>
                        </div>
                    <div class="field">
                        <div>{{ form_label(form.infos_sortie) }}</div><div>{{ form_widget(form.infos_sortie) }}</div>
                    </div>
                </div>
            </div>

            <div class="column">
                <div class="ui form">
                    <div class="field">
                        <div>{{ form_label(form.ville) }}</div><div>{{ form_widget(form.ville) }}</div>
                    </div>
                    <div class="field">
                        <div>{{ form_label(form.lieu) }}</div><div>{{ form_widget(form.lieu) }}</div>
                    </div>
{#                    <div class="field">#}
{#                        <div>Rue : </div><div id="adresse"></div>#}
{#                    </div>#}
                </div>
            </div>

        </div>

        <button class="ui big blue button" type="submit">Enregistrer la sortie</button>
        <button class="ui big blue button">Publier la sortie</button>
        <a type="button" class="ui big blue button" href="{{ path('main') }}">Annuler</a>

    </div>
    {{ form_end(form) }}




{#    <script>#}
{#        //on récupère les champs select ville et lieu#}
{#        let villes = document.getElementById("ville");#}
{#        let lieux = document.getElementById("lieu");#}
{#        let option;#}

{#        //on parcourt le tableau de villes et on l'insère dans le select ville#}
{#        {% for v in villes_asso %}#}
{#                option = document.createElement('option');#}
{#                option.value = '{{ v.id }}';#}
{#                option.innerText = '{{ v.nom }}';#}
{#                villes.appendChild(option);#}
{#        {% endfor %}#}

{#        //on parcourt le tableau de lieux et si le lieu est rattaché à la ville sélectionné, on insère le lieu dans le selec lieu#}
{#        {% for l in lieux_asso %}#}
{#            if('{{ l.ville.id }}' === villes.value) {#}
{#                let option = document.createElement('option');#}
{#                option.value = '{{ l.id }}';#}
{#                option.innerText = '{{ l.nom }}';#}
{#                lieux.appendChild(option);#}
{#            }#}
{#        {% endfor %}#}

{#        //quand on sélectionne une ville, les lieux qui lui sont rattachés sont mis à jour dans le select lieu#}
{#        villes.addEventListener("change", function() {#}

{#            //on vide le select lieu#}
{#            while(lieux.firstChild) {#}
{#                lieux.removeChild(lieux.firstChild);#}
{#            }#}

{#            //on parcourt le tableau de lieux et si le lieu est rattaché à la ville sélectionné, on insère le lieu dans le selec lieu#}
{#            {% for l in lieux_asso %}#}
{#                if('{{ l.ville.id }}' === villes.value) {#}
{#                    let option = document.createElement('option');#}
{#                    option.value = '{{ l.id }}';#}
{#                    option.innerText = '{{ l.nom }}';#}
{#                    lieux.appendChild(option);#}
{#                    console.log(option.value);#}
{#                    console.log(typeof option.value);#}
{#                }#}
{#            {% endfor %}#}
{#        });#}
{#    </script>#}

{% endblock %}
